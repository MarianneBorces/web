build_image:
  name: yamii/web:pom
  net : host
  privileged: true

#language setting
language: node_js
node_js:
  - 0.10.35

before_install:
  - npm install
  - npm install -g mocha


# The path for Xunit to output test reports
env:
  - XUNIT_FILE=shippable/testresults/result.xml

# Create directories for test and coverage reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - npm test

archive: true

after_script:
  - ./node_modules/.bin/mocha -R xunit ./test > shippable/testresults/result.xml

#after_success:

#after_failure: